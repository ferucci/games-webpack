(()=>{"use strict";const t=t=>t!==document.body&&document.body.contains(t),e=(e,i)=>{"loading"!==document.readyState?t(document.getElementById(e))&&i(document.getElementById(e)):document.addEventListener("DOMContentLoaded",(function(){t(document.getElementById(e))&&i(document.getElementById(e))}))},i="index-slider__line",s="draggable",n="index-slider__dots-box",r="index-slider__dot",h="dot-active",d="index-slider__btn-left",o="index-slider__btn-right",a="index-slider__btn-disabled";class l{constructor(t,e={}){this.containerNode=t,this.size=t.childElementCount,this.currentSlide=0,this.currentSlideWasChanged=!1,this.settings={margin:e.margin||0,innerElementsClass:e.innerElementsClass||null,arrow:e.arrow||!1,dots:e.dots||!1,popupEl:e.popupElem||null},this.manageHTML=this.manageHTML.bind(this),this.setParameters=this.setParameters.bind(this),this.setEvents=this.setEvents.bind(this),this.resize=this.resize.bind(this),this.startDrag=this.startDrag.bind(this),this.stopDrag=this.stopDrag.bind(this),this.dragging=this.dragging.bind(this),this.setStylePosition=this.setStylePosition.bind(this),this.progressBar=this.progressBar.bind(this),this.clickDots=this.clickDots.bind(this),this.moveToLeft=this.moveToLeft.bind(this),this.moveToRight=this.moveToRight.bind(this),this.changeActiveDotClass=this.changeActiveDotClass.bind(this),this.changeCurrentSlide=this.changeCurrentSlide.bind(this),this.changeDisabledBtn=this.changeDisabledBtn.bind(this),this.manageHTML(),this.setParameters(),this.setEvents()}manageHTML(){this.containerNode.classList.add("index-slider"),this.containerNode.innerHTML=`\n      <div class="${i}">\n        ${this.containerNode.innerHTML}\n      </div>\n        <div class="index-slider__btns">\n          <button class="${d}"></button>\n          <button class="${o}"></button>\n        </div>\n      <div class="index-slider__dots">\n        <div class="${n}"></div>\n      </div>\n    `,this.lineNode=this.containerNode.querySelector(`.${i}`),this.dotsNode=this.containerNode.querySelector(`.${n}`),this.slideNodes=Array.from(this.lineNode.children).map((t=>function({element:t,className:e}){const i=document.createElement("div");return i.classList.add(e),t.parentNode.insertBefore(i,t),i.appendChild(t),i}({element:t,className:"index-slider__item"}))),this.containerNode.matches(".top-slider__inner")?this.dotsNode.innerHTML=Array.from(Array(this.size).keys()).map((t=>`<button class="${r} ${t===this.currentSlide?h:""}"></button>`)).join(""):this.dotsNode.innerHTML=`<button class="${r}"></button>`,this.dotsNodes=this.dotsNode.querySelectorAll(`.${r}`),this.btnLeft=document.querySelector(`.${d}`),this.btnRight=document.querySelector(`.${o}`)}setParameters(){const t=this.containerNode.getBoundingClientRect();this.innerItemsName=this.containerNode.querySelectorAll(`.${this.settings.innerElementsClass}`),this.innerItemsName&&document.documentElement.scrollWidth<975&&this.containerNode.matches(".slider__items")?(this.innerItemsName.forEach(((t,e)=>{this.width=t.scrollWidth})),this.settings.margin=0,this.size=3*this.innerItemsName.length):this.innerItemsName&&document.documentElement.scrollWidth>975?(this.size=this.innerItemsName.length,this.width=t.width,this.currentSlide=Math.floor(this.currentSlide/3),this.settings.margin=this.settings.margin+5):this.width=t.width-this.settings.margin,this.containerNode.matches("#slider-popup")&&this.innerItemsName.forEach(((t,e)=>{this.width=t.scrollWidth})),this.maximumX=-(this.size-1)*(this.width+this.settings.margin),this.x=-this.currentSlide*(this.width+this.settings.margin),this.resetStyleTransition(),this.lineNode.style.width=this.size*(this.width+this.settings.margin)+"px",this.setStylePosition(),this.changeDisabledBtn(),Array.from(this.slideNodes).forEach((t=>{t.style.width=`${this.width}px`,t.style.marginRight=`${this.settings.margin}px`}))}setEvents(){this.debonceResize=function(t,e=200){let i;return function(s){clearTimeout(i),i=setTimeout(t,e,s)}}(this.resize),window.addEventListener("resize",this.debonceResize),this.lineNode.addEventListener("pointerdown",this.startDrag),window.addEventListener("pointerup",this.stopDrag),window.addEventListener("pointercancel",this.stopDrag),this.containerNode.matches(".top-slider__inner")&&this.dotsNode.addEventListener("click",this.clickDots),this.btnLeft.addEventListener("click",this.moveToLeft),this.btnRight.addEventListener("click",this.moveToRight),null!==this.settings.popupEl&&this.settings.popupEl.forEach((t=>{t.addEventListener("click",this.debonceResize)}))}destroyEvents(){window.removeEventListener("resize",this.debonceResize),this.lineNode.removeEventListener("pointerdown",this.startDrag),window.removeEventListener("pointerup",this.stopDrag),window.removeEventListener("pointercancel",this.stopDrag),this.dotsNode.removeEventListener("click",this.clickDots),this.btnLeft.removeEventListener("click",this.moveToLeft),this.btnRight.removeEventListener("click",this.moveToRight)}resize(){this.setParameters(),this.setStylePosition()}startDrag(t){this.currentSlideWasChanged=!1,this.clickX=t.pageX,this.startX=this.x,this.resetStyleTransition(),this.containerNode.classList.add(s),window.addEventListener("pointermove",this.dragging)}stopDrag(){window.removeEventListener("pointermove",this.dragging),this.containerNode.classList.remove(s),this.changeCurrentSlide()}dragging(t){this.dragX=t.pageX;const e=this.dragX-this.clickX,i=e/5;this.x=Math.max(Math.min(e+this.startX,i),this.maximumX+i),this.setStylePosition(),e>7&&e>0&&!this.currentSlideWasChanged&&this.currentSlide>0&&(this.currentSlideWasChanged=!0,this.currentSlide=this.currentSlide-1),e<-7&&e<0&&!this.currentSlideWasChanged&&this.currentSlide<this.size-1&&(this.currentSlideWasChanged=!0,this.currentSlide=this.currentSlide+1)}clickDots(t){if(this.containerNode.matches(".top-slider__inner")){const e=t.target.closest("button");if(!e)return;let i;for(let t=0;t<this.dotsNodes.length;t++)if(this.dotsNodes[t]===e){i=t;break}if(i==this.currentSlide)return;const s=Math.abs(this.currentSlide-i);this.currentSlide=i,this.changeCurrentSlide(s)}}moveToRight(){this.currentSlide>=this.size-1||(this.currentSlide=this.currentSlide+1,this.changeCurrentSlide())}moveToLeft(){this.currentSlide<=0||(this.currentSlide=this.currentSlide-1,this.changeCurrentSlide())}progressBar(){this.dotsNode.children[0].style.width=parseFloat(100*(this.currentSlide+1)/this.size)+"%"}changeCurrentSlide(t){this.x=-this.currentSlide*(this.width+this.settings.margin),this.setStylePosition(),this.setStyleTransition(t),this.containerNode.matches(".top-slider__inner")?this.changeActiveDotClass():this.progressBar(),this.changeDisabledBtn()}changeActiveDotClass(){for(let t=0;t<this.dotsNodes.length;t++)this.dotsNodes[t].classList.remove(h);this.dotsNodes[this.currentSlide].classList.add(h)}changeDisabledBtn(){this.currentSlide<=0?this.btnLeft.classList.add(a):this.btnLeft.classList.remove(a),this.currentSlide>=this.size-1?this.btnRight.classList.add(a):this.btnRight.classList.remove(a)}setStylePosition(){document.documentElement.scrollWidth<975&&this.containerNode.matches(".slider__items")?this.lineNode.style.transform=`translate3d(${this.x/3+this.settings.margin}px, 0, 0)`:this.lineNode.style.transform=`translate3d(${this.x}px, 0, 0)`}setStyleTransition(t=1){this.lineNode.style.transition=`all ${.25*t}s ease 0s`}resetStyleTransition(){this.lineNode.style.transition="all 0s ease 0s"}}document.querySelector(".main-page")&&(e("slider-games",(t=>new l(t,{margin:20,innerElementsClass:"slider__item",arrow:!0}))),e("slider-header",(t=>new l(t,{margin:15,innerElementsClass:"top-slider__item",dots:!0}))),e("slider-popup",(t=>new l(t,{margin:20,popupElem:document.querySelectorAll('[data-path="game-path"]'),innerElementsClass:"game-card"}))))})();