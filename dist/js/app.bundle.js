(()=>{"use strict";const e=()=>{let e=document.querySelectorAll(".game-card__action-incard");const t=document.querySelector(".basket-content__games");e=document.querySelectorAll(".game-card__action-incard");let n=0;const a=new class{#e=[];addItem(e){this.#e.push(e),this.save()}removeItem(e){const t=this.#e.findIndex((t=>t.id===e.id));-1!==t&&(this.#e.splice(t,1),this.save())}getItems(){return this.#e}save(){localStorage.setItem("cart",JSON.stringify(this.#e))}load(){const e=localStorage.getItem("cart");e&&(this.#e=JSON.parse(e))}};function s(){const e=a.getItems().length;document.querySelector(".basket__num").textContent=e}a.load(),s(),document.getElementById("basket-page")&&setTimeout((function(){a.getItems().forEach((e=>{var n,a,s,c;t.insertAdjacentHTML("afterbegin",(n=e.img,a=e.title,s=e.price,`\n\n    <div class="basket-content__game" data-id="${c=e.id}">\n      <div class="basket-content__game-info">\n          <img class="basket-content__game-image"\n            src="${n}" alt="game image prev">\n          <div class="basket-content__game-text">\n              <span class="basket-content__game-name">\n                ${a}\n              </span>\n              <span class="basket-content__game-sum">\n                ${s}\n              </span>\n          </div>\n      </div>\n      <div class="basket-content__game-select">\n          <button class="basket-content__game-del" aria-label="Удалить товар">\n              <img src="./images/icons/btn-delete.svg" alt=""></button>\n          <div class="basket-content__select-app">\n              <div class="basket-content__select-wrapp">\n\n                  <div id="select-${c}">\n\n                  </div>\n\n                </div>\n          </div>\n      </div>\n  </div> `)),(e=>{new Select(`#select-${e}`,{placeholder:"Выберите способ покупки",selectedId:"1",data:[{id:"1",value:"Аренда через семейный доступ"},{id:"2",value:"Аренда через личный доступ"}],onSelect(e){}})})(e.id)})),document.querySelectorAll(".basket-content__game-del").forEach((e=>{e.addEventListener("click",(e=>{const t=e.currentTarget,n=t.parentNode.closest(".basket-content__game");console.log(t),console.log(n);const c={id:n.dataset.id};n.remove(),a.removeItem(c),s()}))}))}),500),e.forEach((e=>{e.closest(".game-card").setAttribute("data-id",++n),e.addEventListener("click",(e=>{const t=(e=>({title:e.querySelector(".game-card__title").textContent,price:e.querySelector(".game-card__sum").textContent,img:e.querySelector(".game-card__img").getAttribute("src"),id:e.dataset.id}))(e.currentTarget.parentNode.closest(".game-card"));a.addItem(t),s()}))}))};document.addEventListener("DOMContentLoaded",(function(){e()})),alert("ЁПРСТ !!!"),e()})();